# Тест-кейсы

# 1. Позитивные сценарии (Happy Path)

---

## **TC‑01. Успешная покупка тура по карте APPROVED**

**Предусловия:**  
Открыта форма оплаты по карте.

**Шаги:**
1. Ввести номер карты: `1111 2222 3333 4444`
2. Ввести месяц: `12`
3. Ввести год: текущий + 1 (например, `26`)
4. Ввести владельца: `JOHN DOE`
5. Ввести CVC: `123`
6. Нажать «Продолжить»

**Ожидаемый результат (UI):**  
Появляется сообщение: «Операция одобрена банком».

**Ожидаемый результат (БД):**  
В таблице `payment_entity` создаётся запись:
- статус: `APPROVED`
- корректная сумма
- способ оплаты: `payment`
- дата операции

---

# 2. Негативные сценарии

---

## **TC‑02. Покупка тура по карте DECLINED**

**Предусловия:**  
Открыта форма оплаты по карте.

**Шаги:**
1. Ввести номер карты: `5555 6666 7777 8888`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат (UI):**  
Появляется сообщение: «Операция отклонена банком».

**Ожидаемый результат (БД):**  
В таблице `payment_entity` создаётся запись:
- статус: `DECLINED`
- корректная сумма
- способ оплаты: `payment`

---

# 3. Проверка валидации полей формы

Во всех тест‑кейcах ниже:
- отображается сообщение об ошибке,
- запись в БД **не создаётся**.

---

## 3.1. Поле «Номер карты»

---

## **TC‑03.1. Номер карты — пустое значение**

**Шаги:**
1. Ввести в поле «Номер карты» пустое значение `""`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат карты».  
Запись в БД отсутствует.

---

## **TC‑03.2. Номер карты — меньше 16 цифр**

**Шаги:**
1. Ввести в поле «Номер карты»: `1111 2222 3333 444`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат карты».  
Запись в БД отсутствует.

---

## **TC‑03.3. Номер карты — больше 16 цифр**

**Шаги:**
1. Ввести в поле «Номер карты»: `1111 2222 3333 4444 55`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат карты».  
Запись в БД отсутствует.

---

## **TC‑03.4. Номер карты — буквы**

**Шаги:**
1. Ввести в поле «Номер карты»: `ABCD EFGH IJKL MNOP`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат карты».  
Запись в БД отсутствует.

---

## **TC‑03.5. Номер карты — спецсимволы**

**Шаги:**
1. Ввести в поле «Номер карты»: `1111 **** #### 4444`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат карты».  
Запись в БД отсутствует.

---

## **TC‑03.6. Номер карты — карта вне тестового набора**

**Шаги:**
1. Ввести в поле «Номер карты»: `1234 5678 9012 3456`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат карты».  
Запись в БД отсутствует.

---

## **TC‑03.7. Номер карты — все нули**

**Шаги:**
1. Ввести в поле «Номер карты»: `0000 0000 0000 0000`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат карты».  
Запись в БД отсутствует.

---

## 3.2. Поле «Месяц»

---

## **TC‑04.1. Месяц — пустое значение**

**Шаги:**
1. Оставить поле «Месяц» пустым
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверно указан месяц».  
Запись в БД отсутствует.

---

## **TC‑04.2. Месяц — `00`**

**Шаги:**
1. Ввести в поле «Месяц»: `00`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверно указан месяц».  
Запись в БД отсутствует.

---

## **TC‑04.3. Месяц — больше 12**

**Шаги:**
1. Ввести в поле «Месяц»: `13` (или `15`)
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверно указан месяц».  
Запись в БД отсутствует.

---

## **TC‑04.4. Месяц — одна цифра**

**Шаги:**
1. Ввести в поле «Месяц»: `5`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверно указан месяц».  
Запись в БД отсутствует.

---

## **TC‑04.5. Месяц — прошедший месяц текущего года**

**Шаги:**
1. Если сейчас февраль, ввести в поле «Месяц»: `01`
2. Остальные поля заполнить валидно (год — текущий)
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка о некорректном сроке действия карты.  
Запись в БД отсутствует.

---

## **TC‑04.6. Месяц — буквы**

**Шаги:**
1. Ввести в поле «Месяц»: `AB`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверно указан месяц».  
Запись в БД отсутствует.

---

## **TC‑04.7. Месяц — спецсимволы**

**Шаги:**
1. Ввести в поле «Месяц»: `@#`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверно указан месяц».  
Запись в БД отсутствует.

---

## 3.3. Поле «Год»

---

## **TC‑05.1. Год — пустое значение**

**Шаги:**
1. Оставить поле «Год» пустым
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверно указан год».  
Запись в БД отсутствует.

---

## **TC‑05.2. Год — прошедший**

**Шаги:**
1. Если сейчас 2025 год, ввести в поле «Год»: `23`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Истёк срок действия карты».  
Запись в БД отсутствует.

---

## **TC‑05.3. Год — более чем +6 лет от текущего**

**Шаги:**
1. Ввести в поле «Год»: значение, превышающее текущий год более чем на 6 лет (например, `35`)
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверно указан год».  
Запись в БД отсутствует.

---

## **TC‑05.4. Год — буквы**

**Шаги:**
1. Ввести в поле «Год»: `AB`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверно указан год».  
Запись в БД отсутствует.

---

## **TC‑05.5. Год — спецсимволы**

**Шаги:**
1. Ввести в поле «Год»: `@@`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверно указан год».  
Запись в БД отсутствует.

---

## 3.4. Поле «Владелец»

---

## **TC‑06.1. Владелец — пустое значение**

**Шаги:**
1. Оставить поле «Владелец» пустым
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка о том, что поле обязательно для заполнения.  
Запись в БД отсутствует.

---

## **TC‑06.2. Владелец — кириллица**

**Шаги:**
1. Ввести в поле «Владелец»: `ИВАН ИВАНОВ`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат имени владельца».  
Запись в БД отсутствует.

---

## **TC‑06.3. Владелец — цифры**

**Шаги:**
1. Ввести в поле «Владелец»: `12345`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат имени владельца».  
Запись в БД отсутствует.

---

## **TC‑06.4. Владелец — спецсимволы**

**Шаги:**
1. Ввести в поле «Владелец»: `@@@`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат имени владельца».  
Запись в БД отсутствует.

---

## **TC‑06.5. Владелец — очень длинное имя**

**Шаги:**
1. Ввести в поле «Владелец» строку длиной более 70 символов
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка о некорректном формате/длине имени.  
Запись в БД отсутствует.

---

## **TC‑06.6. Владелец — имя из одной буквы**

**Шаги:**
1. Ввести в поле «Владелец»: `A`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат имени владельца».  
Запись в БД отсутствует.

---

## 3.5. Поле «CVC/CVV»

---

## **TC‑07.1. CVC — пустое значение**

**Шаги:**
1. Оставить поле CVC пустым
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат CVC».  
Запись в БД отсутствует.

---

## **TC‑07.2. CVC — 1 цифра**

**Шаги:**
1. Ввести в поле CVC: `1`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат CVC».  
Запись в БД отсутствует.

---

## **TC‑07.3. CVC — 2 цифры**

**Шаги:**
1. Ввести в поле CVC: `12`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат CVC».  
Запись в БД отсутствует.

---

## **TC‑07.4. CVC — буквы**

**Шаги:**
1. Ввести в поле CVC: `ABC`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат CVC».  
Запись в БД отсутствует.

---

## **TC‑07.5. CVC — нули**

**Шаги:**
1. Ввести в поле CVC: `000`
2. Остальные поля заполнить валидно
3. Нажать «Продолжить»

**Ожидаемый результат:**  
Отображается ошибка «Неверный формат CVC».  
Запись в БД отсутствует.

---

# 4. Общие негативные сценарии

---

## **TC‑08. Все поля пустые**

**Шаги:**
1. Оставить все поля формы пустыми
2. Нажать «Продолжить»

**Ожидаемый результат:**
- Под каждым полем отображается ошибка
- Запись в БД отсутствует
